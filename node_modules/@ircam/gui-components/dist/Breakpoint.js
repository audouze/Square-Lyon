'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Breakpoint = function () {
  function Breakpoint(options) {
    _classCallCheck(this, Breakpoint);

    var defaults = {
      callback: function callback(value) {},
      width: 300,
      height: 150,
      container: 'body',
      default: [],
      radius: 4
    };

    this.params = Object.assign({}, defaults, options);

    this._values = {
      norm: [],
      logical: [],
      displayed: []
    };

    this._createElement();

    // initialize
    this._resizeElement();

    this._onMouseDown = this._onMouseDown.bind(this);
    this._onMouseMove = this._onMouseMove.bind(this);
    this._onMouseUp = this._onMouseUp.bind(this);

    this._onResize = this._onResize.bind(this);

    this._onResize();
    this._bindEvents();

    window.addEventListener('resize', this._onResize);
  }

  _createClass(Breakpoint, [{
    key: '_createElement',


    /** @note - same as Slider */
    value: function _createElement() {
      var container = this.params.container;

      this.$canvas = document.createElement('canvas');
      this.ctx = this.$canvas.getContext('2d');

      if (container instanceof Element) this.$container = container;else this.$container = document.querySelector(container);

      this.$container.appendChild(this.$canvas);
    }

    /** @note - same as Slider */

  }, {
    key: '_resizeElement',
    value: function _resizeElement() {
      var _params = this.params,
          width = _params.width,
          height = _params.height;

      // logical and pixel size of the canvas

      this._pixelRatio = function (ctx) {
        var dPR = window.devicePixelRatio || 1;
        var bPR = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;

        return dPR / bPR;
      }(this.ctx);

      this._canvasWidth = width * this._pixelRatio;
      this._canvasHeight = height * this._pixelRatio;

      this.ctx.canvas.width = this._canvasWidth;
      this.ctx.canvas.height = this._canvasHeight;
      this.ctx.canvas.style.width = width + 'px';
      this.ctx.canvas.style.height = height + 'px';
    }
  }, {
    key: 'resize',
    value: function resize(width, height) {}

    // update this.dots.displayed according to new width and height


    /** @note - same as Slider */

  }, {
    key: '_onResize',
    value: function _onResize() {
      this._boundingClientRect = this.$canvas.getBoundingClientRect();
    }
  }, {
    key: '_bindEvents',
    value: function _bindEvents() {
      this.$canvas.addEventListener('mousedown', this._onMouseDown);
    }
  }, {
    key: '_onMouseDown',
    value: function _onMouseDown(e) {
      var pageX = e.pageX;
      var pageY = e.pageY;
      var x = pageX - this._boundingClientRect.left;
      var y = pageY - this._boundingClientRect.top;

      if (this._testHit(x, y)) {
        // bind mousemove and mouseup
        console.log('hit');
      } else {
        // create a new point
        console.log('create dot');
        this._createDot(x, y);
      }
    }
  }, {
    key: '_onMouseMove',
    value: function _onMouseMove() {}
  }, {
    key: '_onMouseUp',
    value: function _onMouseUp() {}

    // test if given x, y (in pixels) match some already displayed values

  }, {
    key: '_testHit',
    value: function _testHit(x, y) {
      var displayedValues = this._values.displayed;
      var radius = this.params.radius;

      for (var i = 0; i < displayedValues.length; i++) {
        var dot = displayedValues[i];
        var dx = dot[0] - x;
        var dy = dot[1] - y;
        var mag = Math.sqrt(dx * dx + dy * dy);

        if (mag <= radius) return true;
      }

      return false;
    }
  }, {
    key: '_createDot',
    value: function _createDot(x, y) {
      var normX = x / this.params.width;
      var normY = y / this.p$arams.height;
    }
  }, {
    key: 'values',
    get: function get() {},
    set: function set(values) {}
  }]);

  return Breakpoint;
}();

exports.default = Breakpoint;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJyZWFrcG9pbnQiLCJvcHRpb25zIiwiZGVmYXVsdHMiLCJjYWxsYmFjayIsIndpZHRoIiwiaGVpZ2h0IiwiY29udGFpbmVyIiwiZGVmYXVsdCIsInJhZGl1cyIsInBhcmFtcyIsIk9iamVjdCIsImFzc2lnbiIsIl92YWx1ZXMiLCJub3JtIiwibG9naWNhbCIsImRpc3BsYXllZCIsIl9jcmVhdGVFbGVtZW50IiwiX3Jlc2l6ZUVsZW1lbnQiLCJfb25Nb3VzZURvd24iLCJiaW5kIiwiX29uTW91c2VNb3ZlIiwiX29uTW91c2VVcCIsIl9vblJlc2l6ZSIsIl9iaW5kRXZlbnRzIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIiRjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiRWxlbWVudCIsIiRjb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwiYXBwZW5kQ2hpbGQiLCJfcGl4ZWxSYXRpbyIsImRQUiIsImRldmljZVBpeGVsUmF0aW8iLCJiUFIiLCJ3ZWJraXRCYWNraW5nU3RvcmVQaXhlbFJhdGlvIiwibW96QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyIsIm1zQmFja2luZ1N0b3JlUGl4ZWxSYXRpbyIsIm9CYWNraW5nU3RvcmVQaXhlbFJhdGlvIiwiYmFja2luZ1N0b3JlUGl4ZWxSYXRpbyIsIl9jYW52YXNXaWR0aCIsIl9jYW52YXNIZWlnaHQiLCJjYW52YXMiLCJzdHlsZSIsIl9ib3VuZGluZ0NsaWVudFJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJlIiwicGFnZVgiLCJwYWdlWSIsIngiLCJsZWZ0IiwieSIsInRvcCIsIl90ZXN0SGl0IiwiY29uc29sZSIsImxvZyIsIl9jcmVhdGVEb3QiLCJkaXNwbGF5ZWRWYWx1ZXMiLCJpIiwibGVuZ3RoIiwiZG90IiwiZHgiLCJkeSIsIm1hZyIsIk1hdGgiLCJzcXJ0Iiwibm9ybVgiLCJub3JtWSIsInAkYXJhbXMi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QUFVQyxLQUFLQSxFQUF6QixDQUFaOztBQUVBLFlBQUlDLE9BQU8zRCxNQUFYLEVBQ0UsT0FBTyxJQUFQO0FBQ0g7O0FBRUQsYUFBTyxLQUFQO0FBQ0Q7OzsrQkFFVTZDLEMsRUFBR0UsQyxFQUFHO0FBQ2YsVUFBTWUsUUFBUWpCLElBQUksS0FBSzVDLE1BQUwsQ0FBWUwsS0FBOUI7QUFDQSxVQUFNbUUsUUFBUWhCLElBQUksS0FBS2lCLE9BQUwsQ0FBYW5FLE1BQS9CO0FBQ0Q7Ozt3QkExR1ksQ0FFWixDO3NCQUVVb0UsTSxFQUFRLENBRWxCOzs7Ozs7a0JBdUdZekUsVSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEJyZWFrcG9pbnQge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgY29uc3QgZGVmYXVsdHMgPSB7XG4gICAgICBjYWxsYmFjazogdmFsdWUgPT4ge30sXG4gICAgICB3aWR0aDogMzAwLFxuICAgICAgaGVpZ2h0OiAxNTAsXG4gICAgICBjb250YWluZXI6ICdib2R5JyxcbiAgICAgIGRlZmF1bHQ6IFtdLFxuICAgICAgcmFkaXVzOiA0LFxuICAgIH07XG5cbiAgICB0aGlzLnBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgIHRoaXMuX3ZhbHVlcyA9IHtcbiAgICAgIG5vcm06IFtdLFxuICAgICAgbG9naWNhbDogW10sXG4gICAgICBkaXNwbGF5ZWQ6IFtdLFxuICAgIH1cblxuICAgIHRoaXMuX2NyZWF0ZUVsZW1lbnQoKTtcblxuICAgIC8vIGluaXRpYWxpemVcbiAgICB0aGlzLl9yZXNpemVFbGVtZW50KCk7XG5cbiAgICB0aGlzLl9vbk1vdXNlRG93biA9IHRoaXMuX29uTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Nb3VzZU1vdmUgPSB0aGlzLl9vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uTW91c2VVcCA9IHRoaXMuX29uTW91c2VVcC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fb25SZXNpemUgPSB0aGlzLl9vblJlc2l6ZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5fb25SZXNpemUoKTtcbiAgICB0aGlzLl9iaW5kRXZlbnRzKCk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fb25SZXNpemUpO1xuICB9XG5cbiAgZ2V0IHZhbHVlcygpIHtcblxuICB9XG5cbiAgc2V0IHZhbHVlcyh2YWx1ZXMpIHtcblxuICB9XG5cbiAgLyoqIEBub3RlIC0gc2FtZSBhcyBTbGlkZXIgKi9cbiAgX2NyZWF0ZUVsZW1lbnQoKSB7XG4gICAgY29uc3QgeyBjb250YWluZXIgfSA9IHRoaXMucGFyYW1zO1xuICAgIHRoaXMuJGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHRoaXMuY3R4ID0gdGhpcy4kY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbiAgICBpZiAoY29udGFpbmVyIGluc3RhbmNlb2YgRWxlbWVudClcbiAgICAgIHRoaXMuJGNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICBlbHNlXG4gICAgICB0aGlzLiRjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcik7XG5cbiAgICB0aGlzLiRjb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy4kY2FudmFzKTtcbiAgfVxuXG4gIC8qKiBAbm90ZSAtIHNhbWUgYXMgU2xpZGVyICovXG4gIF9yZXNpemVFbGVtZW50KCkge1xuICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gdGhpcy5wYXJhbXM7XG5cbiAgICAvLyBsb2dpY2FsIGFuZCBwaXhlbCBzaXplIG9mIHRoZSBjYW52YXNcbiAgICB0aGlzLl9waXhlbFJhdGlvID0gKGZ1bmN0aW9uKGN0eCkge1xuICAgIGNvbnN0IGRQUiA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gICAgY29uc3QgYlBSID0gY3R4LndlYmtpdEJhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHxcbiAgICAgIGN0eC5tb3pCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8XG4gICAgICBjdHgubXNCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8XG4gICAgICBjdHgub0JhY2tpbmdTdG9yZVBpeGVsUmF0aW8gfHxcbiAgICAgIGN0eC5iYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IDE7XG5cbiAgICAgIHJldHVybiBkUFIgLyBiUFI7XG4gICAgfSh0aGlzLmN0eCkpO1xuXG4gICAgdGhpcy5fY2FudmFzV2lkdGggPSB3aWR0aCAqIHRoaXMuX3BpeGVsUmF0aW87XG4gICAgdGhpcy5fY2FudmFzSGVpZ2h0ID0gaGVpZ2h0ICogdGhpcy5fcGl4ZWxSYXRpbztcblxuICAgIHRoaXMuY3R4LmNhbnZhcy53aWR0aCA9IHRoaXMuX2NhbnZhc1dpZHRoO1xuICAgIHRoaXMuY3R4LmNhbnZhcy5oZWlnaHQgPSB0aGlzLl9jYW52YXNIZWlnaHQ7XG4gICAgdGhpcy5jdHguY2FudmFzLnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuICAgIHRoaXMuY3R4LmNhbnZhcy5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHR9cHhgO1xuICB9XG5cbiAgcmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcblxuICAgIC8vIHVwZGF0ZSB0aGlzLmRvdHMuZGlzcGxheWVkIGFjY29yZGluZyB0byBuZXcgd2lkdGggYW5kIGhlaWdodFxuICB9XG5cbiAgLyoqIEBub3RlIC0gc2FtZSBhcyBTbGlkZXIgKi9cbiAgX29uUmVzaXplKCkge1xuICAgIHRoaXMuX2JvdW5kaW5nQ2xpZW50UmVjdCA9IHRoaXMuJGNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgfVxuXG4gIF9iaW5kRXZlbnRzKCkge1xuICAgIHRoaXMuJGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9vbk1vdXNlRG93bik7XG4gIH1cblxuICBfb25Nb3VzZURvd24oZSkgIHtcbiAgICBjb25zdCBwYWdlWCA9IGUucGFnZVg7XG4gICAgY29uc3QgcGFnZVkgPSBlLnBhZ2VZO1xuICAgIGNvbnN0IHggPSBwYWdlWCAtIHRoaXMuX2JvdW5kaW5nQ2xpZW50UmVjdC5sZWZ0O1xuICAgIGNvbnN0IHkgPSBwYWdlWSAtIHRoaXMuX2JvdW5kaW5nQ2xpZW50UmVjdC50b3A7XG5cbiAgICBpZiAodGhpcy5fdGVzdEhpdCh4LCB5KSkge1xuICAgICAgLy8gYmluZCBtb3VzZW1vdmUgYW5kIG1vdXNldXBcbiAgICAgIGNvbnNvbGUubG9nKCdoaXQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY3JlYXRlIGEgbmV3IHBvaW50XG4gICAgICBjb25zb2xlLmxvZygnY3JlYXRlIGRvdCcpO1xuICAgICAgdGhpcy5fY3JlYXRlRG90KHgsIHkpO1xuICAgIH1cbiAgfVxuXG4gIF9vbk1vdXNlTW92ZSgpIHtcblxuICB9XG5cbiAgX29uTW91c2VVcCgpIHtcblxuICB9XG5cbiAgLy8gdGVzdCBpZiBnaXZlbiB4LCB5IChpbiBwaXhlbHMpIG1hdGNoIHNvbWUgYWxyZWFkeSBkaXNwbGF5ZWQgdmFsdWVzXG4gIF90ZXN0SGl0KHgsIHkpIHtcbiAgICBjb25zdCBkaXNwbGF5ZWRWYWx1ZXMgPSB0aGlzLl92YWx1ZXMuZGlzcGxheWVkO1xuICAgIGNvbnN0IHJhZGl1cyA9IHRoaXMucGFyYW1zLnJhZGl1cztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlzcGxheWVkVmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBkb3QgPSBkaXNwbGF5ZWRWYWx1ZXNbaV07XG4gICAgICBjb25zdCBkeCA9IGRvdFswXSAtIHg7XG4gICAgICBjb25zdCBkeSA9IGRvdFsxXSAtIHk7XG4gICAgICBjb25zdCBtYWcgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuXG4gICAgICBpZiAobWFnIDw9IHJhZGl1cylcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgX2NyZWF0ZURvdCh4LCB5KSB7XG4gICAgY29uc3Qgbm9ybVggPSB4IC8gdGhpcy5wYXJhbXMud2lkdGg7XG4gICAgY29uc3Qgbm9ybVkgPSB5IC8gdGhpcy5wJGFyYW1zLmhlaWdodDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCcmVha3BvaW50O1xuIl19